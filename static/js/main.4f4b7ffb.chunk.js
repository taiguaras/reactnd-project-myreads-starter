(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,a){e.exports=a.p+"static/media/no-photo.7dd4e4d3.jpg"},120:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},141:function(e,t,a){e.exports=a(283)},278:function(e,t,a){},281:function(e,t,a){},283:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(35),c=a.n(o),l=a(78),s=a.n(l),i=a(118),u=a(32),h=a(25),m=a(27),d=a(26),f=a(28),b=a(293),p=a(294),E=a(295),k=a(119),v=a.n(k),y=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleMoveBookToShelf=function(e,t,n){a.props.onUpdateShelf(n,t)},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"ShelfNameToTitle",value:function(e){switch(e){case"currentlyReading":return r.a.createElement("button",{className:"ui icon left labeled button"},r.a.createElement("i",{"aria-hidden":"true",className:"book icon"}),"Currently Reading");case"wantToRead":return r.a.createElement("div",null,r.a.createElement("button",{className:"ui icon left labeled button"},r.a.createElement("i",{"aria-hidden":"true",className:"heart icon"}),"Want to read"));case"read":return r.a.createElement("div",null,r.a.createElement("button",{className:"ui icon left labeled button"},r.a.createElement("i",{"aria-hidden":"true",className:"checkmark icon"}),"Read"));default:return r.a.createElement("div",null,r.a.createElement("button",{className:"ui icon left labeled button"},r.a.createElement("i",{"aria-hidden":"true",className:"times circle icon"}),"None"))}}},{key:"mapAuthors",value:function(e){return e.map(function(e){return r.a.createElement("p",{className:"author",key:e},e)})}},{key:"render",value:function(){var e=this,t=this.props.metaData;return r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:"book-cover",style:{width:"100%",height:"100%",backgroundSize:"cover",backgroundImage:"url(".concat(t.imageLinks?t.imageLinks.thumbnail:v.a,")")}})),r.a.createElement("div",{className:"book-title"},t.title),r.a.createElement("div",{className:"book-subtitle"},t.subtitle),r.a.createElement("div",{className:"book-authors"},t.authors?this.mapAuthors(t.authors):"No authors found."),r.a.createElement("div",{className:"book-shelf"}," ",this.ShelfNameToTitle(t.shelf)," "),r.a.createElement("div",{className:"extra"},r.a.createElement("button",{className:"button",onClick:function(a){return e.handleMoveBookToShelf(a,"currentlyReading",t)}},r.a.createElement("i",{"aria-hidden":"true",title:"Currently Reading",className:"book icon"}),r.a.createElement("p",null,"Currently Reading")),r.a.createElement("button",{className:"button",onClick:function(a){return e.handleMoveBookToShelf(a,"wantToRead",t)}},r.a.createElement("i",{"aria-hidden":"true",title:"Want to Read",className:"heart icon"}),r.a.createElement("p",null,"Want to Read")),r.a.createElement("button",{className:"button",onClick:function(a){return e.handleMoveBookToShelf(a,"read",t)}},r.a.createElement("i",{"aria-hidden":"true",title:"Read",className:"checkmark icon"}),r.a.createElement("p",null,"Read")),r.a.createElement("button",{className:"button",onClick:function(a){return e.handleMoveBookToShelf(a,"none",t)}},r.a.createElement("i",{"aria-hidden":"true",title:"Clear",className:"refresh icon"}),r.a.createElement("p",null,"Clear"))))}}]),t}(n.Component),N=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.books,n=t.shelfDisplay;return r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},n),r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("div",{className:"books-grid"},a.map(function(t){return r.a.createElement(y,{metaData:t,key:t.id,onUpdateShelf:e.props.onUpdateShelf,book:a})}))))}}]),t}(n.Component),S=function(e){var t=e.books.filter(function(t){return t.shelf===e.shelfName});return r.a.createElement("div",{style:{margin:"10px"}},r.a.createElement(N,{books:t,onUpdateShelf:e.onUpdateShelf,shelfName:e.shelfName,shelfDisplay:e.shelfDisplay}))},g=a(289),j=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.books,n=t.onUpdateShelf;return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"list-books"},r.a.createElement("div",{className:"list-books-content"},r.a.createElement(S,{books:a,shelfName:"currentlyReading",shelfDisplay:"Currently Reading",onUpdateShelf:n}),r.a.createElement(S,{books:a,shelfName:"wantToRead",shelfDisplay:"Want to Read",onUpdateShelf:n}),r.a.createElement(S,{books:a,shelfName:"read",shelfDisplay:"Read",onUpdateShelf:n})),r.a.createElement("div",{className:"open-search"},r.a.createElement(g.a,{to:"/search"}," ",r.a.createElement("button",{onClick:function(){return e.setState({showSearchPage:!0})}},"Add a book")))))}}]),t}(n.Component),O=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).SearchBook=function(e){a.props.onSearchBook(e.target.value)},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.books,n=t.query,o=t.loading,c=t.onUpdateShelf;return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"search-books"},r.a.createElement("div",{className:"search-books-bar"},r.a.createElement(g.a,{to:"/"},r.a.createElement("button",{className:"close-search"},"Close")),r.a.createElement("div",{className:"search-books-input-wrapper"},r.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:n,onChange:function(t){return e.SearchBook(t)}}))),r.a.createElement("div",{id:"search-result-container"},r.a.createElement("h3",null,"Search results"),r.a.createElement(N,{books:a,onUpdateShelf:c}),!0===o&&r.a.createElement("div",{className:"loading"},r.a.createElement("span",null,"Loading..."),r.a.createElement("br",null),r.a.createElement("br",null)),0===a.length&&!1===o&&r.a.createElement("div",{className:"no-results"},"No results found."))))}}]),t}(n.Component),R=a(292),C=a(290),w=a(291),T=a(120),U=a.n(T),B=function(){return r.a.createElement(R.a,{fixed:"top"},r.a.createElement(C.a,null,r.a.createElement(R.a.Item,{as:"a",header:!0},r.a.createElement(w.a,{size:"mini",src:U.a,style:{marginRight:"1.5em"}}),"My Reads"),r.a.createElement(R.a.Item,{as:"a"},r.a.createElement(g.a,{to:"/"},"Home")),r.a.createElement(R.a.Item,{as:"a"},r.a.createElement(g.a,{to:"/search"},"Search"))))},x=a(81),I="https://reactnd-books-api.udacity.com",D=localStorage.token;D||(D=localStorage.token=Math.random().toString(36).substr(-8));var A={Accept:"application/json",Authorization:D},L=function(e,t){return fetch("".concat(I,"/books/").concat(e.id),{method:"PUT",headers:Object(x.a)({},A,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},M=function(e){return fetch("".concat(I,"/search"),{method:"POST",headers:Object(x.a)({},A,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},q=(a(278),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],query:"",searchResults:[],SearchIsLoading:!1},a.updateShelf=function(e,t){var n=!1,r=a.state,o=r.books,c=r.searchResults;L(e,t).then(function(){c.forEach(function(a){a.id===e.id&&(a.shelf=t)}),o.map(function(a){return a.id===e.id&&(a.shelf=t,n=!0),a}),!1===n&&(e.shelf=t,o.push(e)),a.setState({books:o,searchResults:c})})},a.SearchBook=function(e){a.setState({searchResults:[],query:e,SearchIsLoading:!1}),clearTimeout(a.debouncing),""!==e&&(a.setState({SearchIsLoading:!0}),a.debouncing=setTimeout(function(){M(a.state.query).then(function(e){if(a.setState({SearchIsLoading:!1}),e.length>0){var t=e.map(function(e){return e.shelf="none",a.state.books.forEach(function(t){e.id===t.id&&(e.shelf=t.shelf)}),e});a.setState({searchResults:t})}else a.setState({searchResults:[]})})},1500))},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(I,"/books"),{headers:A}).then(function(e){return e.json()}).then(function(e){return e.books});case 2:t=e.sent,this.setState({books:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.books,n=t.query,o=t.searchResults,c=t.SearchIsLoading;return r.a.createElement(b.a,null,r.a.createElement(p.a,null,r.a.createElement(E.a,{path:"/",exact:!0,render:function(){return r.a.createElement("div",{className:"layout"},r.a.createElement(B,null),r.a.createElement(j,{books:a,onUpdateShelf:e.updateShelf}))}}),r.a.createElement(E.a,{path:"/search",render:function(){return r.a.createElement("div",{className:"layout"},r.a.createElement(O,{books:o,query:n,loading:c,onUpdateShelf:e.updateShelf,onSearchBook:e.SearchBook}))}})))}}]),t}(r.a.Component));a(281);c.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[141,2,1]]]);
//# sourceMappingURL=main.4f4b7ffb.chunk.js.map